<!doctype html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Soundbits</title>
    <meta name="description" content="Soundbits is great">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="bower_components/normalize-css/normalize.css">
    <link rel="stylesheet" href="styles/main.css">

    <script src="https://use.typekit.net/nml8ndz.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

  </head>
  <body>
    <!--[if lt IE 8]>
      <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <div id="container"></div>

    <script id="template" type="text/ractive">
      {{#if (state === 'landing')}}
        <div class="landing">
          <h1>Sound Bits</h1>
        </div>
      {{/if}}

      {{#if (state === 'list')}}
        <div class="list">
          <div class="list-container">
            <div class="list-header">{{ podcast }}</div>

            <div class = "podcast-list">{{ description }}</div>
          </div>
        </div>
      {{/if}}

      {{#if (state === 'suggest')}}
        <div class="suggest">
          <div class="centered-container">
            <div class="app-header">
              <div class="logo">
              </div>
              <h2>SoundBits</h2>
            </div>
          </div>

          {{#user.currentSuggestion}}
            <div  class="swipe-container" on-swipe="processSuggestion">
              <div class="podcast-image">
                <img src = "https://store.thisamericanlife.org/v/vspfiles/photos/RADIO-SHIRT-2.jpg">
              </div>

              <p>Show: {{ podcast }}</p>
              <p>Episode: {{ description }}</p>
              <p>{{count}}/3 episodes selected</p>
              <div class="centered-container">
                <div class="show-episode-list btn" >
                  <h3>Your New Episodes</h3>
                </div>
              </div>
            </div>
          {{/user.currentSuggestion}}
        </div>
      {{/if}}

      {{#if (state === 'intro')}}
        <div class="intro">
          <div class="centered-container">
            <div class="app-header">
              <div class="logo">
              </div>
              <h2>SoundBits</h2>
            </div>
            <div class="user-type">
              <div class="what-listen">
                <h2> Do You Have A <br>Favourite Podcast?</h2>
              </div>

              <div class="has-podcasts btn" on-tap="setState:pick">
                <h3>I Have a Few</h3>
              </div>

              <div class = "new-to-podcasts btn" on-tap="setState:suggest">
                <h3> I'm New to Podcasts</h3>
              </div>
            </div>
          </div>
        </div>
      {{/if}}

      {{#if (state === 'pick')}}
        <div class="pick">
          <div class="app-header">
              <div class="logo">
              </div>
              <h2>SoundBits</h2>
           </div>
          <h2 class = "list-header">Which Podcasts Do You Listen To?</h2>

          <ul>
            {{#each shows}}
              <li class="pick-show {{#like}}like{{/like}}" on-tap="selectShow:{{ id }}">{{ name }}</li>
            {{/each}}
          </ul>

          {{#if (_.filter(shows, 'like').length) }}
            <p class="find" on-tap="setState:suggest">Find New Shows!</p>
          {{/if}}
        </div>
      {{/if}}

      <div class="reset">
        <button on-tap="resetLocal">Reset</button>
      </div>
    </script>

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/underscore/underscore.js"></script>
    <script src="bower_components/backbone/backbone-min.js"></script>
    <script src="bower_components/ractive/ractive.js"></script>
    <script src="bower_components/ractive-backbone/dist/ractive-adaptors-backbone.js"></script>
    <script src="bower_components/ractive-events-tap/dist/ractive-events-tap.js"></script>
    <script src="bower_components/hammerjs/hammer.min.js"></script>
    <script src="bower_components/ractive-touch/index.js"></script>
    <script src="bower_components/howler.js/howler.min.js"></script>
    <script src="js/models.js"></script>
    <script src="js/app.js"></script>


    <!-- Google Analytics: change UA-XXXXX-X to be your site""s ID. -->
    <script>
      var files = ['../sufjan.mp3', '../intro.mp3'];
      var suggestions = [];

      for (var i=0; i < files.length; i++) {
        var sound = new Howl({
          urls:[files[i]]
        });
        suggestions.push(sound);
      }

      var current = 0;
      suggestions[current].play();

      $('.btn').on('click', function(e) {
        suggestions[current].unload();
        current++;
        if (current < suggestions.length) {
          suggestions[current].play();
        }
      });

      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src="https://www.google-analytics.com/analytics.js";
      r.parentNode.insertBefore(e,r)}(window,document,"script", "ga"));
      ga("create","UA-XXXXX-X","auto");ga("send","pageview");
    </script>
  </body>
</html>
